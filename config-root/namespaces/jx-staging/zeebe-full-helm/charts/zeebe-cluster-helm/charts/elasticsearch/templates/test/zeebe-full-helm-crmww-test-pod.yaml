# Source: zeebe-full-helm/charts/zeebe-cluster-helm/charts/elasticsearch/templates/test/test-elasticsearch-health.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "zeebe-full-helm-crmww-test"
  annotations:
    "helm.sh/hook": test
    "helm.sh/hook-delete-policy": hook-succeeded
  namespace: jx-staging
  labels:
    gitops.jenkins-x.io/pipeline: 'namespaces'
spec:
  securityContext:
    fsGroup: 1000
    runAsUser: 1000
  containers:
    - name: "zeebe-full-helm-xuuln-test"
      image: "docker.elastic.co/elasticsearch/elasticsearch:6.8.5"
      imagePullPolicy: "IfNotPresent"
      command:
        - "sh"
        - "-c"
        - |
          #!/usr/bin/env bash -e
          curl -XGET --fail 'elasticsearch-master:9200/_cluster/health?wait_for_status=green&timeout=1s'
  restartPolicy: Never
